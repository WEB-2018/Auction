<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>{{title}}</title>
    <!-- Bootstrap Core CSS -->
    <link href="/assests/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="/assests/vendor/metisMenu/metisMenu.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/assests/dist/css/sb-admin-2.css" rel="stylesheet">

    <!-- Morris Charts CSS -->
    <!--<link href="/assests/vendor/morrisjs/morris.css" rel="stylesheet">-->

    <!-- Custom Fonts -->
    <link href="/assests/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat+Alternates|Varela+Round" rel="stylesheet">

    <!-- Product CSS -->
    <link href="/assests/dist/css/Product.css" rel="stylesheet" type="text/css">
 
    <script type="text/javascript" src="/assests/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Sacramento" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Snippet" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Electrolize" rel="stylesheet">
    <link rel="stylesheet" href="/assests/bootstrap-3.3.7-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assests/bootstrap-3.3.7-dist/css/material-design-iconic-font.css">
    <!--<link rel="stylesheet" href="css/bootstrap.theme.rin.css">-->
    <link rel="stylesheet" href="/assests/bootstrap-3.3.7-dist/css/style.css">
    <link rel="icon" href="/imgs/favicon.ico">
    <script type="text/javascript" src="/assests/bootstrap-3.3.7-dist/js/main.js"></script>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
     <style type="text/css">
        @import url('https://fonts.googleapis.com/css?family=Muli');

* {
    box-sizing: border-box;
    font-family: 'Muli', sans-serif;
}

.four{
  width:250px;
  height:50px;
  margin:20px 0px 20px 40%;
  background-size:cover;
  background: url('http://www.foursites.nl/static/img/logo.svg') no-repeat center center;
}
.left{
  flex:1;
  z-index:1;
  // background:#efeff4;
  height:100%;
  background-size: cover;
  background-image:url('http://s966.info/library/r/red-curtain-background-hd/red-curtain-background-hd-11.jpg');
}
.right{
  flex:1;
  z-index:1;
  height:100%;
  background-size: cover;
  background-image:url('http://s966.info/library/r/red-curtain-background-hd/red-curtain-background-hd-11.jpg');
}
#Laag_1{
  z-index:12;
  width:100px;
  height:100px;
  position:absolute;
  top:50%;
  left:46.3%;
  cursor:pointer;
}

.open{
  animation-name: spin;
  animation-duration: 100ms;
  animation-iteration-count: 5;
  animation-timing-function: linear;
}

@keyframes spin {
    from {
        transform:rotate(0deg);
    }
    to {
        transform:rotate(360deg);
    }
}

.sliderleft{
  animation-name: slideleft;
  animation-duration: 3s;
  animation-fill-mode: forwards;
  animation-delay: 0.5s;
}

@keyframes slideleft {
  0% {
    transform:translateX(0);
  }
  100% {
    transform:translateX(-100%);
  }
}

.sliderright{
  animation-name: slideright;
  animation-duration: 3s;
  animation-fill-mode: forwards;
  animation-delay: 0.5s;
}

@keyframes slideright {
  0% {
    transform:translateX(0);
  }
  100% {
    transform:translateX(100%);
  }
}


#container {
  position:absolute;
   width: auto;
    height: auto;
    -webkit-perspective: 800px;
            perspective: 800px;
    text-align: center;
  z-index:0;
  background-image:url('http://www.modafinilsale.com/data/out/349/230766601-white-color-wallpapers.jpg');
  background-color:#F5F5F5;
}
.card {
    margin: 10px;
    display: inline-block;
    position: relative;
    width: 220px;
    height: 260px;
    opacity: 0.85;
}
.front,
.back {
    width: 100%;
    height: 100%;
    position: absolute;
    -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
    -webkit-transition: -webkit-transform 300ms;
    transition: -webkit-transform 300ms;
    transition: transform 300ms;
    transition: transform 300ms, -webkit-transform 300ms;
    -webkit-transition-timing-function: linear;
            transition-timing-function: linear;
    border-radius: 5px;
}
.front {
    transform: rotateY(0deg);
    background: #9152f8;
  background: -webkit-linear-gradient(top, #ffb547, #000000);
  background: -o-linear-gradient(top, #ffb547, #ff6363);
  background: -moz-linear-gradient(top, #ffb547, #ff6363);
  background: linear-gradient(top, #ffb547, #ff6363);
    text-align: center;
    padding: 30px;
}
.back {
    background: #9152f8;
  background: -webkit-linear-gradient(top, #ffb547, #000000);
  background: -o-linear-gradient(top, #ffb547, #ff6363);
  background: -moz-linear-gradient(top, #ffb547, #ff6363);
  background: linear-gradient(top, #ffb547, #ff6363);
    -webkit-transform: rotateY(180deg);
            transform: rotateY(180deg);
    padding: 40px 15px;
    color: #fff;
}
.card:hover .front {
    -webkit-transform: rotateY(-180deg);
            transform: rotateY(-180deg);
}
.card:hover .back {
    -webkit-transform: rotateY(0deg);
            transform: rotateY(0deg);
}
//styling
.back .contact{
    height: 90%;
    width: 100%;
    border: 5px solid white;
    display: inline-block;
   // margin-bottom: 10px;
  
}
.front .contact {
    height: 120px;
    width: 120px;
    border: 5px solid white;
    border-radius: 50%;
    display: inline-block;
    margin-bottom: 10px;
}
.front .name {
    display: inline-block;
    font-size: 18px;
    color: #fff;
}
.front .job {
    color: #fff;
}
.front hr {
    border: none;
    color: white;
    border: 1px solid;
}

    </style>
</head>

<body>
    {{>header}}

    <div class="row">
        <div class="col-md-2 pull-right text-right" style="padding-right: 50px;">
            <div id="Time"></div>
            <p id="result" style="display: none"></p>
        </div>
    </div>
 

    <!--menu-->
   {{>menu}}
    <!--cate-->


    <div class="row">
        <div class="col-md-12">
            {{{body}}}
        </div>
    </div>
    {{>footer}}



<!-- jQuery -->
<script src="/assests/vendor/jquery/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/assests/vendor/bootstrap/js/bootstrap.min.js"></script>

<!-- Metis Menu Plugin JavaScript -->
<script src="/assests/vendor/metisMenu/metisMenu.min.js"></script>

<!-- Morris Charts JavaScript -->
<!--<script src="/assests/vendor/raphael/raphael.min.js"></script>-->
<!--<script src="/assests/vendor/morrisjs/morris.min.js"></script>-->
<!--<script src="/assests/data/morris-data.js"></script>-->

<!-- Custom Theme JavaScript -->
<script src="/assests/dist/js/sb-admin-2.js"></script>

<!-- Product JS -->
<script src="/assests/dist/js/Product.js"></script>
<script type="text/javascript" src="/assests/js/product.js"></script>
<script>

    $(document).ready(function () {
        formatEditor();
        //hien icon theo loai
     

        //hide sidebar-seach khi o trang search
        if ($("title").html().indexOf("Tìm kiếm") != -1) {
            $(".sidebar-search").css("display", "none");
            var key = $('#txtSearch').val();
            if (key != "") {
                count = num;
                $("#btnLoadMoreProduct").css('display', 'block');
                $('#searchProduct').html('');
                $("#searchFooter2").css('display', 'none');
                showMoreProduct();
            }
        }


    })


    
    //submit khi nhan search o Trang chu
    $("#btnSearchHomepage").click(function () {
        var keyword = $('#keyword').val();
        var path = "/product/search?keyword=" + keyword + "&count=0&newPage=1";
        window.location.replace(path);
    })

    var count = 0, i = 0, num = 4;
    var sortType = 0;
    $("#btnSearch").click(function () {
        count = num;
        $("#btnLoadMoreProduct").css('display', 'block');
        $('#searchProduct').html('');
        $("#searchFooter2").css('display', 'none');
        sortType = 0;
        disableSortButtons();
        showMoreProduct();
    })


    $("#buttonSortTime").click(function () {
        count = num;
        $("#btnLoadMoreProduct").css('display', 'block');
        $('#searchProduct').html('');
        $("#searchFooter2").css('display', 'none');
        sortType = 1;
        disableSortPriceButton();
        showMoreProduct();
    })


    $("#buttonSortPrice").click(function () {
        count = num;
        $("#btnLoadMoreProduct").css('display', 'block');
        $('#searchProduct').html('');
        $("#searchFooter2").css('display', 'none');
        sortType = 2;
        disableSortTimeButton();
        showMoreProduct();
    })

    function Comment(id) {
       
        var comment = $('#cmt').val();
        var usercmt = $('#usercmt').val();
       
        var Data = {
            prodID: id,
            usercmt: usercmt,
            comment: comment
        };
     
        $.ajax({
            type: "POST",
            url: "/product/comment",
            data: Data,
            success: function (data) {
                if(data=="success"){
                    $('#newcmt').append(' <h5 style="color:orange"> <i class="fa fa-user" style="color:#434343">  </i>&nbsp'+usercmt+'</h5>'
                   +'<p style="text-align:right;font-style:italic;font-size:8pt">'+ comment+'</p>').fadeIn('slow');;
                }else {
                    alert("Error!Try again!");
                }
            }
        });
       
    }

 

    function disableSortTimeButton() {
        if (!$('#buttonSortPrice').hasClass('btnEnable')) {
            $('#buttonSortPrice').addClass('btnEnable');
        }
        if ($('#buttonSortTime').hasClass('btnEnable')) {
            $('#buttonSortTime').removeClass('btnEnable');
        }
    }

    function disableSortPriceButton() {
        if (!$('#buttonSortTime').hasClass('btnEnable')) {
            $('#buttonSortTime').addClass('btnEnable');
        }
        if ($('#buttonSortPrice').hasClass('btnEnable')) {
            $('#buttonSortPrice').removeClass('btnEnable');
        }
    }

    function disableSortButtons() {
        if ($('#buttonSortPrice').hasClass('btnEnable')) {
            $('#buttonSortPrice').removeClass('btnEnable');
        }
        if ($('#buttonSortTime').hasClass('btnEnable')) {
            $('#buttonSortTime').removeClass('btnEnable');
        }
    }

  
     function showMoreComment() {
        var keyword = "";
        var xhttp;
        xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                var products = JSON.parse(this.response);
                var productCount = products.length;
                i = 0;
                while (i < productCount) {
                    $('#comment').append(productToThumbnail(products[i]));
                    i++;
                }
                count = count + num;

                if (productCount < num) {
                    $("#btnLoadMoreProduct").css('display', 'none');
                    $("#searchFooter2").css('display', 'block');
                }
            }
        };
        var category = 1;
        var priFrm = 0;
        var priTo= 5000;
        console.log("break point");
        var url = "/product/search?keyword=" + keyword + "&count=" + count + "&sortType=" + sortType
                + "&category=" + category  + "&priFrm=" + priFrm + "&priTo=" + priTo;
        xhttp.open("GET", url, true);
        xhttp.send();
    }

    function showMoreProduct() {
        var keyword = $('#txtSearch').val();
        var xhttp;
        xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                var products = JSON.parse(this.response);
                var productCount = products.length;
                i = 0;
                while (i < productCount) {
                    $('#searchProduct').append(productToThumbnail(products[i]));
                    i++;
                }
                count = count + num;

                if (productCount < num) {
                    $("#btnLoadMoreProduct").css('display', 'none');
                    $("#searchFooter2").css('display', 'block');
                }
            }
        };
        var category = $('#catID').val();
        var priFrm = $('#priFrm').val();
        var priTo= $('#priTo').val();
        console.log("break point");
        var url = "/product/search?keyword=" + keyword + "&count=" + count + "&sortType=" + sortType
                + "&category=" + category  + "&priFrm=" + priFrm + "&priTo=" + priTo;
        xhttp.open("GET", url, true);
        xhttp.send();
    }

    function productToThumbnail(product) {
        var res = '<div class="col-sm-3 col-lg-3 col-md-3 product-infor">'
                + '<div class="thumbnail text-center" style="border:2px">'
                + '<img src="/imgs/sp/' + product.idSanPham + '/1.jpg" style="height:200px;object-fit:contain" alt="">'
                + '<div class="caption" style="height: 200px">'
                + '<h4>'
                + '<a href="/product/detail/' + product.idSanPham + '">' + product.tenSanPham + '&nbsp&nbsp</a>'
                + '</h4>'
                + ' <h3 class="pro-price">'+product.giaHienTai +'$</h3>'
//                + '<h4 class="pull-right" style="color: green">'+'0'+'</h4>'
                + '<div style="display: inline;">'
                + '</div>'
                +'<div>'
                +'<button pull-center style="background-color:rgb(255, 127, 0)" class="btn btn-basic">'
                +'<a href="/product/detail/' + product.idSanPham + '" style="color:white">More details &nbsp</a></button>'
                +'</div>'
                + '</div>'
                +'</div>'
                +'</div>'
                +'</div>'
                ;


        return res;
    }

    function addProductToCart(idProduct){

        var data = {
            //idNguoiDung: session.user.idNguoiDung,
            idSanPham: idProduct,
            soLuong: $("#dauGia").val()

        };

        console.log(data);
        $.ajax( {
            type: "POST",
            url: "/product/addCart",
            data: data,
            success: function (data) {
                if(data=="success"){
                    alert("Success! Added " + $("#dauGia").val() + " product(s)!");
                }else {

    

                    alert("Login to add product!");
                    window.location.href = '/login';

                }
            }
        } );
    }

</script>


</body>

</html>
